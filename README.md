# block-zone-simulator
Simulation of roller coaster block zones

This repo is a WIP.  As of now, the notebook allows for the following:

- Specify block zones and add trains to a circuit
- Run basic simulations under the following rules:
  - Every block zone can only occupy one train and has a mechanism for stopping a train at the end.
  - Each train must obtain ownership of the proceeding block zone before it may advance past the brakes in its current block zone
  - Each train must maintain ownership of its current block zone until it completely exits it, at which point it will become free
  - Each block zone has the following characteristics:
    - \# of seconds from start of zone to brakes at end of zone
    - \# of seconds to advance past the brakes and clear zone without having stopped
    - \# of seconds to advance past the brakes and clear zone from complete stop
    - E-Stop Block (yes/no): these blocks can stop a ride vehicle but cannot advance a train forward.  Being held at an E-Stop block causes a complete shutdown of the attraction.
    
The data generated by the simulation allows for calculating:

- Total Hourly Throughput of attraction in \# of cycles 
- Percent of simulation time each train spent idle (held at block due to congestion)
- Comparison of theoretical vs actual throughput when dispatch delay is introduced

More metrics and features to come are listed in todo.md.

### Example Simulation Animation
![Example Animation](Code/example_sim.gif)

This example gif shows a circuit with dual loading stations.  Track switches are used on lift 1 and final block 1, the current switch position of which is shown on the graph.  Please ignore the x and y axes!


### User Start Guide

To use this simulator, you can download the repo into your preferred setup if you are already familiar with Python.  This project was developed using Python 3.6.8.

For those unfamiliar with Python, the following steps can get you up and running with the simulation in a few minutes:

1. Create a notebook in Google Colab
  - This service is free and easy to setup if you already have a Google account.  Simply login to your Google account at https://colab.research.google.com/, and...
2. When prompted to add or select a notebook, choose GitHub -> enter "AlexBorger" in search bar -> Select Code/colab_start_guide.ipynb
3. A new notebook should open up in Google Colab.  Each cell has a play button in the top left corner.  The notebook has three cells.  Run each one exactly once and observe the outputs.

The animation that renders is currently blinking and I'm not sure why.  But, after running the above steps, you are using the sim!  You can edit the data within the `blocks` dictionary in cell 2 to see how it affects the capacity of the ride.  If you edit this data, be sure to hit the Play button in that cell, or the changes won't be applied.

